<div class="container">

    <app-introduction [@slideInFromLeft] *ngIf="showIntroduction"></app-introduction>

    <div class="game" [@slideInFromRight] *ngIf="showGame">
        <mat-grid-list cols="6" rowHeight="fit" gutterSize="0.2rem">
            <mat-grid-tile colspan="4" rowspan="1">
                <app-score-stars [score]="score" [maxScore]="maxScore"></app-score-stars>
            </mat-grid-tile>
            <mat-grid-tile colspan="2" rowspan="1">
                <app-stopwatch></app-stopwatch>
            </mat-grid-tile>
            <ng-container *ngFor="let item of draw">
                <div *ngIf="item.visible" [@fadeIn]>
                    <mat-grid-tile colspan="6" rowspan="6">
                        <svg version="1.0" width="100%" height="100%" viewBox="0 0 510 510" class="svg {{item.css}}">
                            <g class="bg">
                                <ng-container *ngFor="let c of item.circles">
                                    <circle [attr.cx]="c.cx" [attr.cy]="c.cy" [attr.r]="c.r" [attr.class]="c.css"></circle>
                                </ng-container>
                            </g>
                            <g class="prop-circle">
                                <g class="{{item.propositions[0].css}}">
                                    <circle class="prop" cx="454" cy="219" r="46"></circle>
                                    <text x="456" y="237" text-anchor="middle">
                                        {{item.propositions[0].charge}}
                                    </text>
                                    <circle cx="454" cy="219" r="46" class="ghost" (click)="selectCharge(item, 0)"></circle>
                                </g>
                                <g class="{{item.propositions[1].css}}">
                                    <circle class="prop" cx="410" cy="312" r="46"></circle>
                                    <text x="409" y="330" text-anchor="middle">
                                        {{item.propositions[1].charge}}
                                    </text>
                                    <circle cx="410" cy="312" r="46" class="ghost" (click)="selectCharge(item, 1)"></circle>
                                </g>
                                <g class="{{item.propositions[2].css}}">
                                    <circle class="prop" cx="317" cy="268" r="46"></circle>
                                    <text x="317" y="286" text-anchor="middle">
                                        {{item.propositions[2].charge}}
                                    </text>
                                    <circle cx="317" cy="268" r="46" class="ghost" (click)="selectCharge(item, 2)"></circle>
                                </g>
                                <g class="{{item.propositions[3].css}}">
                                    <circle class="prop" cx="361" cy="175" r="46"></circle>
                                    <text x="361" y="193" text-anchor="middle">
                                        {{item.propositions[3].charge}}
                                    </text>
                                    <circle cx="361" cy="175" r="46" class="ghost" (click)="selectCharge(item, 3)"></circle>
                                </g>
                            </g>
                            <g>
                                <foreignObject x="00" y="310" width="357" height="200" class="symbol">
                                    <div xmlns="http://www.w3.org/1999/xhtml">
                                        <div [innerHTML]="item.symbol"></div>
                                    </div>
                                </foreignObject>
                            </g>
                        </svg>
                    </mat-grid-tile>
                </div>
            </ng-container>
            <mat-grid-tile colspan="6" rowspan="2">
                <button mat-mini-fab color="primary" (click)="intro()">
                    <mat-icon>arrow_back</mat-icon>
                </button>
            </mat-grid-tile>
        </mat-grid-list>
    </div>

    <app-show-results [@slideInFromRight] *ngIf="showResults"></app-show-results>

</div>